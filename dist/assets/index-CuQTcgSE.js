(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();console.log("Let's write javascript");let t=new Audio,s,f;function p(e){e=Math.floor(e);let o=Math.floor(e/60),i=e%60;return o=String(o).padStart(2,"0"),i=String(i).padStart(2,"0"),`${o}:${i}`}async function y(e){f=e,console.log(e);let o=await fetch(`http://127.0.0.1:5500/${e}`);console.log("Fetching from:",`http://127.0.0.1:5500/${e}`);let i=await o.text(),u=document.createElement("div");u.innerHTML=i;let n=u.getElementsByTagName("a");s=[];for(let l=0;l<n.length;l++){const c=n[l];c.href.endsWith(".mp3")&&(s.push(c.href.split(`/${e}/`)[1]),console.log(s))}let r=document.querySelector(".songList").getElementsByTagName("ul")[0];console.log(r),r.innerHTML="";for(const l of s)r.innerHTML=r.innerHTML+`<li> 
                                                    <img class="invert" src="images/music.svg" alt="">
                                                    <div class="info">
                                                        <div>${l.replaceAll("%20"," ")}</div>
                                                        <div>Anju</div>
                                                    </div>
                                                    <div class="playNow">
                                                        <span>Play Now</span>
                                                        <img class="invert" src="images/play.svg" alt="">
                                                    </div> 
                                                </li>`;return Array.from(document.querySelector(".songList").getElementsByTagName("li")).forEach(l=>{l.addEventListener("click",c=>{let a=l.querySelector(".info").firstElementChild.innerHTML.trim();console.log("Playing:",a),d(`songs/${a}`)})}),s}const d=(e,o=!1)=>{const i=window.location.origin;t.src=`${i}/${f}/`+(e.includes("songs/")?e.replace("songs/",""):e),console.log("Attempting to play:",t.src),!o&&t.paused?(t.play(),play.src="pause.svg"):o&&!t.paused&&(t.pause(),play.src="play.svg"),document.querySelector(".songInfo").innerHTML=decodeURIComponent(e.split("/").pop()),document.querySelector(".songTime").innerHTML="00:00 / 00:00"};async function v(){let o=await(await fetch("http://127.0.0.1:5500/songs/")).text(),i=document.createElement("div");i.innerHTML=o;let u=i.getElementsByTagName("a"),n=document.querySelector(".cardContainer"),r=Array.from(u);for(let l=0;l<r.length;l++){const c=r[l];if(c.href.includes("/songs/")){let a=c.href.split("/").slice(-1)[0];console.log(a);let m=await fetch(`http://127.0.0.1:5500/songs/${a}/info.json`);console.log(m);let g=await m.json();console.log(g),n.innerHTML=n.innerHTML+`<div class="card" data-folder="${a}">
                        <div class="play">
                            <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="23" cy="23" r="23" fill="lightgreen" />
                                <path
                                    d="M17.05 13.606L30.54 21.394a.7.7 0 0 1 0 1.212L17.05 30.394A.7.7 0 0 1 16 29.788V14.212a.7.7 0 0 1 1.05-.606z"
                                    fill="black" />
                            </svg>

                        </div>
                        <img src="songs/${a}/cover.jpg" alt="">
                        <h2>${g.title}</h2>
                        <p>${g.description}</p>
                    </div>`}}Array.from(document.getElementsByClassName("card")).forEach(l=>{console.log(l),l.addEventListener("click",async c=>{console.log("Dataset:",c.currentTarget.dataset);let a=c.currentTarget.dataset.folder;s=await y(`songs/${a}`),d(s[0])})})}async function h(){s=await y("songs/Bollywood"),d(s[0],!0),v(),play.addEventListener("click",()=>{console.log(t),t.paused?(t.play(),play.src="pause.svg"):(t.pause(),play.src="play.svg")}),t.addEventListener("timeupdate",()=>{console.log(t.currentTime,t.duration),document.querySelector(".songTime").innerHTML=`${p(t.currentTime)} / ${p(t.duration)}`,document.querySelector(".circle").style.left=t.currentTime/t.duration*100+"%"}),document.querySelector(".seekbar").addEventListener("click",e=>{let o=e.offsetX/e.target.getBoundingClientRect().width*100;document.querySelector(".circle").style.left=o+"%",t.currentTime=t.duration*o/100}),document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".left").style.left="0"}),document.querySelector(".close").addEventListener("click",()=>{document.querySelector(".left").style.left="-110%"}),previous.addEventListener("click",()=>{console.log("Previous is clicked");let e=s.indexOf(t.src.split("/").slice(-1)[0]);e-1>=0&&d(s[e-1])}),next.addEventListener("click",()=>{console.log("Next is clicked");let e=s.indexOf(t.src.split("/").slice(-1)[0]);e!==-1&&e+1<s.length&&d(s[e+1])}),document.querySelector(".range").getElementsByTagName("input")[0].addEventListener("change",e=>{console.log("Setting Volume to",e.target.value,"/ 100"),t.volume=parseInt(e.target.value)/100}),document.querySelector(".volume >img").addEventListener("click",e=>{console.log(e.target),e.target.src.includes("volume.svg")?(e.target.src=e.target.src.replace("volume.svg","mute.svg"),t.volume=0,document.querySelector(".range").getElementsByTagName("input")[0].value=0):(e.target.src=e.target.src.replace("mute.svg","volume.svg"),t.volume=.1,document.querySelector(".range").getElementsByTagName("input")[0].value=10)})}h();
