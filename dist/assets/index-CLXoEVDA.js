(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}})();const v=window.location.hostname==="localhost"?"http://localhost:5000":"https://your-production-api.com";fetch(`${v}/your-endpoint`).then(e=>e.json()).then(e=>console.log(e)).catch(e=>console.error("Error:",e));console.log("Let's write javascript");let o=new Audio,s,f;function p(e){e=Math.floor(e);let l=Math.floor(e/60),c=e%60;return l=String(l).padStart(2,"0"),c=String(c).padStart(2,"0"),`${l}:${c}`}async function y(e){f=e;let l=await fetch(`http://127.0.0.1:5500/${e}`);console.log("Fetching from:",`http://127.0.0.1:5500/${e}`);let c=await l.text(),u=document.createElement("div");u.innerHTML=c;let t=u.getElementsByTagName("a");s=[];for(let n=0;n<t.length;n++){const i=t[n];i.href.endsWith(".mp3")&&(s.push(i.href.split(`/${e}/`)[1]),console.log(s))}let r=document.querySelector(".songList").getElementsByTagName("ul")[0];console.log(r),r.innerHTML="";for(const n of s)r.innerHTML=r.innerHTML+`<li> 
                                                    <img class="invert" src="images/music.svg" alt="">
                                                    <div class="info">
                                                        <div>${n.replaceAll("%20"," ")}</div>
                                                        <div>Anju</div>
                                                    </div>
                                                    <div class="playNow">
                                                        <span>Play Now</span>
                                                        <img class="invert" src="images/play.svg" alt="">
                                                    </div> 
                                                </li>`;return Array.from(document.querySelector(".songList").getElementsByTagName("li")).forEach(n=>{n.addEventListener("click",i=>{let a=n.querySelector(".info").firstElementChild.innerHTML.trim();console.log("Playing:",a),d(`songs/${a}`)})}),s}const d=(e,l=!1)=>{o.src=`/${f}/`+e.replace("songs/",""),console.log("Attempting to play:",o.src),l||(o.play(),play.src="pause.svg"),document.querySelector(".songInfo").innerHTML=decodeURIComponent(e.split("/").pop()),document.querySelector(".songTime").innerHTML="00:00 / 00:00"};async function h(){let l=await(await fetch("http://127.0.0.1:5500/songs/")).text(),c=document.createElement("div");c.innerHTML=l;let u=c.getElementsByTagName("a"),t=document.querySelector(".cardContainer"),r=Array.from(u);for(let n=0;n<r.length;n++){const i=r[n];if(i.href.includes("/songs/")){let a=i.href.split("/").slice(-1)[0];console.log(a);let m=await fetch(`http://127.0.0.1:5500/songs/${a}/info.json`);console.log(m);let g=await m.json();console.log(g),t.innerHTML=t.innerHTML+`<div class="card" data-folder="${a}">
                        <div class="play">
                            <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="23" cy="23" r="23" fill="lightgreen" />
                                <path
                                    d="M17.05 13.606L30.54 21.394a.7.7 0 0 1 0 1.212L17.05 30.394A.7.7 0 0 1 16 29.788V14.212a.7.7 0 0 1 1.05-.606z"
                                    fill="black" />
                            </svg>

                        </div>
                        <img src="songs/${a}/cover.jpg" alt="">
                        <h2>${g.title}</h2>
                        <p>${g.description}</p>
                    </div>`}}Array.from(document.getElementsByClassName("card")).forEach(n=>{console.log(n),n.addEventListener("click",async i=>{console.log("Dataset:",i.currentTarget.dataset);let a=i.currentTarget.dataset.folder;s=await y(`songs/${a}`),d(s[0])})})}async function L(){s=await y("songs/Bollywood"),d(s[0],!0),h(),play.addEventListener("click",()=>{console.log(o),o.paused?(o.play(),play.src="pause.svg"):(o.pause(),play.src="play.svg")}),o.addEventListener("timeupdate",()=>{console.log(o.currentTime,o.duration),document.querySelector(".songTime").innerHTML=`${p(o.currentTime)} / ${p(o.duration)}`,document.querySelector(".circle").style.left=o.currentTime/o.duration*100+"%"}),document.querySelector(".seekbar").addEventListener("click",e=>{let l=e.offsetX/e.target.getBoundingClientRect().width*100;document.querySelector(".circle").style.left=l+"%",o.currentTime=o.duration*l/100}),document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".left").style.left="0"}),document.querySelector(".close").addEventListener("click",()=>{document.querySelector(".left").style.left="-110%"}),previous.addEventListener("click",()=>{console.log("Previous is clicked");let e=s.indexOf(o.src.split("/").slice(-1)[0]);e-1>=0&&d(s[e-1])}),next.addEventListener("click",()=>{console.log("Next is clicked");let e=s.indexOf(o.src.split("/").slice(-1)[0]);e!==-1&&e+1<s.length&&d(s[e+1])}),document.querySelector(".range").getElementsByTagName("input")[0].addEventListener("change",e=>{console.log("Setting Volume to",e.target.value,"/ 100"),o.volume=parseInt(e.target.value)/100}),document.querySelector(".volume >img").addEventListener("click",e=>{console.log(e.target),e.target.src.includes("volume.svg")?(e.target.src=e.target.src.replace("volume.svg","mute.svg"),o.volume=0,document.querySelector(".range").getElementsByTagName("input")[0].value=0):(e.target.src=e.target.src.replace("mute.svg","volume.svg"),o.volume=.1,document.querySelector(".range").getElementsByTagName("input")[0].value=10)})}L();
