(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();console.log("Let's write javascript");let t=new Audio,s,y;function p(e){e=Math.floor(e);let o=Math.floor(e/60),i=e%60;return o=String(o).padStart(2,"0"),i=String(i).padStart(2,"0"),`${o}:${i}`}async function v(e){y=e,console.log(e);const o=window.location.origin;let i=await fetch(`${o}/${e}`);console.log("Fetching from:",`${o}/${e}`);let d=await i.text(),n=document.createElement("div");n.innerHTML=d;let r=n.getElementsByTagName("a");s=[];for(let l=0;l<r.length;l++){const a=r[l];a.href.endsWith(".mp3")&&(s.push(a.href.split(`/${e}/`)[1]),console.log(s))}let c=document.querySelector(".songList").getElementsByTagName("ul")[0];console.log(c),c.innerHTML="";for(const l of s)c.innerHTML=c.innerHTML+`<li> 
                                                    <img class="invert" src="images/music.svg" alt="">
                                                    <div class="info">
                                                        <div>${l.replaceAll("%20"," ")}</div>
                                                        <div>Anju</div>
                                                    </div>
                                                    <div class="playNow">
                                                        <span>Play Now</span>
                                                        <img class="invert" src="images/play.svg" alt="">
                                                    </div> 
                                                </li>`;return Array.from(document.querySelector(".songList").getElementsByTagName("li")).forEach(l=>{l.addEventListener("click",a=>{let u=l.querySelector(".info").firstElementChild.innerHTML.trim();console.log("Playing:",u),g(`songs/${u}`)})}),s}const g=(e,o=!1)=>{const i=window.location.origin;console.log("Base URL:",i),t.src=`${i}/${y}/`+(e.includes("songs/")?e.replace("songs/",""):e),console.log("Attempting to play:",t.src),!o&&t.paused?(t.play(),play.src="pause.svg"):o&&!t.paused&&(t.pause(),play.src="play.svg"),document.querySelector(".songInfo").innerHTML=decodeURIComponent(e.split("/").pop()),document.querySelector(".songTime").innerHTML="00:00 / 00:00"};async function h(){const e=window.location.origin;let i=await(await fetch(`${e}/songs/`)).text(),d=document.createElement("div");d.innerHTML=i;let n=d.getElementsByTagName("a"),r=document.querySelector(".cardContainer"),c=Array.from(n);for(let l=0;l<c.length;l++){const a=c[l];if(a.href.includes("/songs/")){let u=a.href.split("/").slice(-1)[0];console.log(u);let f=await fetch(`http://127.0.0.1:5500/songs/${u}/info.json`);console.log(f);let m=await f.json();console.log(m),r.innerHTML=r.innerHTML+`<div class="card" data-folder="${u}">
                        <div class="play">
                            <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="23" cy="23" r="23" fill="lightgreen" />
                                <path
                                    d="M17.05 13.606L30.54 21.394a.7.7 0 0 1 0 1.212L17.05 30.394A.7.7 0 0 1 16 29.788V14.212a.7.7 0 0 1 1.05-.606z"
                                    fill="black" />
                            </svg>

                        </div>
                        <img src="songs/${u}/cover.jpg" alt="">
                        <h2>${m.title}</h2>
                        <p>${m.description}</p>
                    </div>`}}Array.from(document.getElementsByClassName("card")).forEach(l=>{console.log(l),l.addEventListener("click",async a=>{console.log("Dataset:",a.currentTarget.dataset);let u=a.currentTarget.dataset.folder;s=await v(`songs/${u}`),g(s[0])})})}async function L(){s=await v("songs/Bollywood"),g(s[0],!0),h(),play.addEventListener("click",()=>{console.log(t),t.paused?(t.play(),play.src="pause.svg"):(t.pause(),play.src="play.svg")}),t.addEventListener("timeupdate",()=>{console.log(t.currentTime,t.duration),document.querySelector(".songTime").innerHTML=`${p(t.currentTime)} / ${p(t.duration)}`,document.querySelector(".circle").style.left=t.currentTime/t.duration*100+"%"}),document.querySelector(".seekbar").addEventListener("click",e=>{let o=e.offsetX/e.target.getBoundingClientRect().width*100;document.querySelector(".circle").style.left=o+"%",t.currentTime=t.duration*o/100}),document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".left").style.left="0"}),document.querySelector(".close").addEventListener("click",()=>{document.querySelector(".left").style.left="-110%"}),previous.addEventListener("click",()=>{console.log("Previous is clicked");let e=s.indexOf(t.src.split("/").slice(-1)[0]);e-1>=0&&g(s[e-1])}),next.addEventListener("click",()=>{console.log("Next is clicked");let e=s.indexOf(t.src.split("/").slice(-1)[0]);e!==-1&&e+1<s.length&&g(s[e+1])}),document.querySelector(".range").getElementsByTagName("input")[0].addEventListener("change",e=>{console.log("Setting Volume to",e.target.value,"/ 100"),t.volume=parseInt(e.target.value)/100}),document.querySelector(".volume >img").addEventListener("click",e=>{console.log(e.target),e.target.src.includes("volume.svg")?(e.target.src=e.target.src.replace("volume.svg","mute.svg"),t.volume=0,document.querySelector(".range").getElementsByTagName("input")[0].value=0):(e.target.src=e.target.src.replace("mute.svg","volume.svg"),t.volume=.1,document.querySelector(".range").getElementsByTagName("input")[0].value=10)})}L();
