(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();console.log("Let's write javascript");let r=new Audio,s,p;function f(e){e=Math.floor(e);let o=Math.floor(e/60),i=e%60;return o=String(o).padStart(2,"0"),i=String(i).padStart(2,"0"),`${o}:${i}`}async function y(e){p=e;let o=await fetch(`http://127.0.0.1:5500/${e}`);console.log("Fetching from:",`http://127.0.0.1:5500/${e}`);let i=await o.text(),u=document.createElement("div");u.innerHTML=i;let t=u.getElementsByTagName("a");s=[];for(let l=0;l<t.length;l++){const c=t[l];c.href.endsWith(".mp3")&&(s.push(c.href.split(`/${e}/`)[1]),console.log(s))}let n=document.querySelector(".songList").getElementsByTagName("ul")[0];console.log(n),n.innerHTML="";for(const l of s)n.innerHTML=n.innerHTML+`<li> 
                                                    <img class="invert" src="images/music.svg" alt="">
                                                    <div class="info">
                                                        <div>${l.replaceAll("%20"," ")}</div>
                                                        <div>Anju</div>
                                                    </div>
                                                    <div class="playNow">
                                                        <span>Play Now</span>
                                                        <img class="invert" src="images/play.svg" alt="">
                                                    </div> 
                                                </li>`;return Array.from(document.querySelector(".songList").getElementsByTagName("li")).forEach(l=>{l.addEventListener("click",c=>{let a=l.querySelector(".info").firstElementChild.innerHTML.trim();console.log("Playing:",a),d(`songs/${a}`)})}),s}const d=(e,o=!1)=>{r.src=`/${p}/`+e.replace("songs/",""),console.log("Attempting to play:",r.src),o||(r.play(),play.src="pause.svg"),document.querySelector(".songInfo").innerHTML=decodeURIComponent(e.split("/").pop()),document.querySelector(".songTime").innerHTML="00:00 / 00:00"};async function v(){let o=await(await fetch("http://127.0.0.1:5500/songs/")).text(),i=document.createElement("div");i.innerHTML=o;let u=i.getElementsByTagName("a"),t=document.querySelector(".cardContainer"),n=Array.from(u);for(let l=0;l<n.length;l++){const c=n[l];if(c.href.includes("/songs/")){let a=c.href.split("/").slice(-1)[0];console.log(a);let m=await fetch(`http://127.0.0.1:5500/songs/${a}/info.json`);console.log(m);let g=await m.json();console.log(g),t.innerHTML=t.innerHTML+`<div class="card" data-folder="${a}">
                        <div class="play">
                            <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="23" cy="23" r="23" fill="lightgreen" />
                                <path
                                    d="M17.05 13.606L30.54 21.394a.7.7 0 0 1 0 1.212L17.05 30.394A.7.7 0 0 1 16 29.788V14.212a.7.7 0 0 1 1.05-.606z"
                                    fill="black" />
                            </svg>

                        </div>
                        <img src="songs/${a}/cover.jpg" alt="">
                        <h2>${g.title}</h2>
                        <p>${g.description}</p>
                    </div>`}}Array.from(document.getElementsByClassName("card")).forEach(l=>{console.log(l),l.addEventListener("click",async c=>{console.log("Dataset:",c.currentTarget.dataset);let a=c.currentTarget.dataset.folder;s=await y(`songs/${a}`),d(s[0])})})}async function h(){s=await y("songs/Bollywood"),d(s[0],!0),v(),play.addEventListener("click",()=>{console.log(r),r.paused?(r.play(),play.src="pause.svg"):(r.pause(),play.src="play.svg")}),r.addEventListener("timeupdate",()=>{console.log(r.currentTime,r.duration),document.querySelector(".songTime").innerHTML=`${f(r.currentTime)} / ${f(r.duration)}`,document.querySelector(".circle").style.left=r.currentTime/r.duration*100+"%"}),document.querySelector(".seekbar").addEventListener("click",e=>{let o=e.offsetX/e.target.getBoundingClientRect().width*100;document.querySelector(".circle").style.left=o+"%",r.currentTime=r.duration*o/100}),document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".left").style.left="0"}),document.querySelector(".close").addEventListener("click",()=>{document.querySelector(".left").style.left="-110%"}),previous.addEventListener("click",()=>{console.log("Previous is clicked");let e=s.indexOf(r.src.split("/").slice(-1)[0]);e-1>=0&&d(s[e-1])}),next.addEventListener("click",()=>{console.log("Next is clicked");let e=s.indexOf(r.src.split("/").slice(-1)[0]);e!==-1&&e+1<s.length&&d(s[e+1])}),document.querySelector(".range").getElementsByTagName("input")[0].addEventListener("change",e=>{console.log("Setting Volume to",e.target.value,"/ 100"),r.volume=parseInt(e.target.value)/100}),document.querySelector(".volume >img").addEventListener("click",e=>{console.log(e.target),e.target.src.includes("volume.svg")?(e.target.src=e.target.src.replace("volume.svg","mute.svg"),r.volume=0,document.querySelector(".range").getElementsByTagName("input")[0].value=0):(e.target.src=e.target.src.replace("mute.svg","volume.svg"),r.volume=.1,document.querySelector(".range").getElementsByTagName("input")[0].value=10)})}h();
